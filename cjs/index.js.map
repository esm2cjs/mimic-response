{
  "version": 3,
  "sources": ["../esm/index.js"],
  "sourcesContent": ["// We define these manually to ensure they're always copied\n// even if they would move up the prototype chain\n// https://nodejs.org/api/http.html#http_class_http_incomingmessage\nconst knownProperties = [\n\t'aborted',\n\t'complete',\n\t'headers',\n\t'httpVersion',\n\t'httpVersionMinor',\n\t'httpVersionMajor',\n\t'method',\n\t'rawHeaders',\n\t'rawTrailers',\n\t'setTimeout',\n\t'socket',\n\t'statusCode',\n\t'statusMessage',\n\t'trailers',\n\t'url',\n];\n\nexport default function mimicResponse(fromStream, toStream) {\n\tif (toStream._readableState.autoDestroy) {\n\t\tthrow new Error('The second stream must have the `autoDestroy` option set to `false`');\n\t}\n\n\tconst fromProperties = new Set([...Object.keys(fromStream), ...knownProperties]);\n\n\tconst properties = {};\n\n\tfor (const property of fromProperties) {\n\t\t// Don't overwrite existing properties.\n\t\tif (property in toStream) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tproperties[property] = {\n\t\t\tget() {\n\t\t\t\tconst value = fromStream[property];\n\t\t\t\tconst isFunction = typeof value === 'function';\n\n\t\t\t\treturn isFunction ? value.bind(fromStream) : value;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tfromStream[property] = value;\n\t\t\t},\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t};\n\t}\n\n\tObject.defineProperties(toStream, properties);\n\n\tfromStream.once('aborted', () => {\n\t\ttoStream.destroy();\n\n\t\ttoStream.emit('aborted');\n\t});\n\n\tfromStream.once('close', () => {\n\t\tif (fromStream.complete) {\n\t\t\tif (toStream.readable) {\n\t\t\t\ttoStream.once('end', () => {\n\t\t\t\t\ttoStream.emit('close');\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttoStream.emit('close');\n\t\t\t}\n\t\t} else {\n\t\t\ttoStream.emit('close');\n\t\t}\n\t});\n\n\treturn toStream;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,MAAM,kBAAkB;AAAA,EACvB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD;AAEe,SAAR,cAA+B,YAAY,UAAU;AAC3D,MAAI,SAAS,eAAe,aAAa;AACxC,UAAM,IAAI,MAAM,qEAAqE;AAAA,EACtF;AAEA,QAAM,iBAAiB,oBAAI,IAAI,CAAC,GAAG,OAAO,KAAK,UAAU,GAAG,GAAG,eAAe,CAAC;AAE/E,QAAM,aAAa,CAAC;AAEpB,aAAW,YAAY,gBAAgB;AAEtC,QAAI,YAAY,UAAU;AACzB;AAAA,IACD;AAEA,eAAW,YAAY;AAAA,MACtB,MAAM;AACL,cAAM,QAAQ,WAAW;AACzB,cAAM,aAAa,OAAO,UAAU;AAEpC,eAAO,aAAa,MAAM,KAAK,UAAU,IAAI;AAAA,MAC9C;AAAA,MACA,IAAI,OAAO;AACV,mBAAW,YAAY;AAAA,MACxB;AAAA,MACA,YAAY;AAAA,MACZ,cAAc;AAAA,IACf;AAAA,EACD;AAEA,SAAO,iBAAiB,UAAU,UAAU;AAE5C,aAAW,KAAK,WAAW,MAAM;AAChC,aAAS,QAAQ;AAEjB,aAAS,KAAK,SAAS;AAAA,EACxB,CAAC;AAED,aAAW,KAAK,SAAS,MAAM;AAC9B,QAAI,WAAW,UAAU;AACxB,UAAI,SAAS,UAAU;AACtB,iBAAS,KAAK,OAAO,MAAM;AAC1B,mBAAS,KAAK,OAAO;AAAA,QACtB,CAAC;AAAA,MACF,OAAO;AACN,iBAAS,KAAK,OAAO;AAAA,MACtB;AAAA,IACD,OAAO;AACN,eAAS,KAAK,OAAO;AAAA,IACtB;AAAA,EACD,CAAC;AAED,SAAO;AACR;",
  "names": []
}
